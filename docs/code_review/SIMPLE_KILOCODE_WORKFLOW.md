# Simple KiloCode Integration Workflow

This guide explains the streamlined workflow for integrating KiloCode's `/review-contextual` command with Claude Code using simple slash commands and file exchange.

## Overview

The workflow uses two slash commands and simple file exchange:
1. **Claude Code**: `/code-review` → generates review request
2. **Human**: Runs KiloCode `/review-contextual` → saves results  
3. **Claude Code**: `/implement-fixes` → reads results and implements changes

## Directory Structure

```
/home/graham/workspace/experiments/cc_executor/docs/code_review/
├── SIMPLE_KILOCODE_WORKFLOW.md     # This guide
└── reviewer/
    └── incoming/                    # File exchange directory
        ├── 001_focus_area_review_request.md      # Generated by Claude
        ├── 001_focus_area_review_results.md      # Saved by human from KiloCode
        ├── 002_another_focus_review_request.md
        └── completed/                            # Archived completed reviews
```

## Step-by-Step Workflow

### Step 1: Create Review Request (Claude Code)

Human runs in Claude Code:
```
/code-review
```

Claude Code will ask for:
- Files to review (full paths)
- Focus area (snake_case, e.g., "memory_management", "error_handling") 
- Context (what specific issues to look for)

Claude generates: `{sequence}_{focus_area}_review_request.md`

**Example output:**
```
✅ Code review request created at: 
/home/graham/workspace/experiments/cc_executor/docs/code_review/reviewer/incoming/001_batch_memory_management_review_request.md

Next steps:
1. Human: Run /review-contextual in KiloCode
2. Human: Paste the file paths from the request  
3. Human: Save results as 001_batch_memory_management_review_results.md
```

### Step 2: KiloCode Review (Human Action)

1. Open the generated review request file
2. Copy the file paths listed under "Files to Review"
3. Open KiloCode in VSCode
4. Run: `/review-contextual`
5. Paste the file paths when prompted
6. Wait for KiloCode's LLM analysis
7. Save the complete output as: `{sequence}_{focus_area}_review_results.md` in the same `incoming/` directory

### Step 3: Implement Fixes (Claude Code)

Human runs in Claude Code:
```
/implement-fixes
```

Claude Code will:
- List available review results
- Ask which one to implement
- Parse KiloCode's findings
- Implement specific fixes with line-by-line changes
- Create completion report
- Move files to `completed/` directory

## File Naming Convention

Following the orchestrator guide patterns:

**Format**: `{SEQUENCE}_{FOCUS_AREA}_{TYPE}.md`

- **SEQUENCE**: 3-digit number (001, 002, 003...)
- **FOCUS_AREA**: snake_case description
  - `memory_management`
  - `error_handling` 
  - `websocket_reliability`
  - `batch_processing`
  - `security_review`
- **TYPE**: 
  - `review_request` (generated by Claude)
  - `review_results` (saved by human from KiloCode)
  - `implementation_complete` (generated by Claude after fixes)

## Example Files

### Review Request (Generated by Claude)
```markdown
# Code Review Request: Memory Management

**Review ID**: 001_memory_management
**Date**: 2025-01-19 17:45:30
**Status**: AWAITING_HUMAN_ACTION

## Files to Review
- `/path/to/file1.py`
- `/path/to/file2.py`

## Context
Review for memory leaks and resource cleanup...

## Instructions for Human
1. Copy the file paths above
2. Run /review-contextual in KiloCode
3. Save output as: 001_memory_management_review_results.md
```

### Review Results (Saved by Human)
```markdown
# KiloCode Review Results: Memory Management

## Summary
Found 3 critical issues and 2 minor improvements...

## File: /path/to/file1.py

### Issue 1 (Critical): Memory leak in FAISS operations
**Line 145-150**: The FAISS index is created but never cleaned up...
**Recommendation**: Add explicit cleanup in finally block...

### Issue 2 (Major): Unbounded list growth
**Line 67**: The batch_results list grows without bounds...
**Recommendation**: Implement batch size limits...
```

## Benefits

1. **Simple**: Only two slash commands needed
2. **Uses KiloCode's LLM**: Exactly as requested - no external API calls
3. **Human-friendly**: Clear instructions at each step
4. **Follows standards**: Uses orchestrator guide naming conventions
5. **Minimal setup**: Just file exchange, no complex workflow management
6. **Traceable**: Clear sequence numbering and status tracking

## Troubleshooting

### "No review results found"
- Check that the human saved the KiloCode output with the correct filename
- Ensure the file is in the `incoming/` directory
- Verify the naming convention matches: `{sequence}_{focus_area}_review_results.md`

### "KiloCode didn't find issues"
- KiloCode may determine the code is already good quality
- The human can still save the "no issues found" response for documentation
- Claude Code will recognize this and archive the request as complete

### "Can't parse KiloCode output"
- Claude Code will show the raw content and ask for clarification
- The human can manually specify which parts are actionable issues
- Future improvements can enhance the parsing logic

## Integration with Existing Systems

This workflow integrates with:
- **Orchestrator Guide**: Uses the same naming conventions and JSON structure
- **MCP Servers**: Can be enhanced with MCP tools for automation
- **Logger Agent**: All actions can be logged for learning
- **Post-task hooks**: Can trigger automatic review requests after task completion

## Future Enhancements

- Auto-detection of new review results files
- Integration with git hooks for automatic review requests
- Enhanced parsing of KiloCode output formats
- Batch processing of multiple review requests
- Integration with CI/CD pipelines

---

*Last updated: 2025-01-19*
*This workflow provides seamless integration between Claude Code and KiloCode while maintaining simplicity and human control.*