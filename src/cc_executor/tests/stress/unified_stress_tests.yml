# Unified Stress Tests Specification (generated from unified_stress_test_orchestrator.md)
# This file is machine-readable by the orchestrator and human-friendly for edits.
# Comments are allowed. Keep commands in literal blocks (|) for clarity.

version: 1
base_url: http://localhost:8002
defaults:
  timeout: 60           # seconds
  expect_exit: 0        # default expected exit code

# Individual test cases
# id: unique slug (string)
# description: short explanation
# env: optional environment variables (dict)
# cmd: shell snippet executed with `bash -c`
# timeout: overrides default timeout (int seconds)
# expect_exit: expected exit code (int) â€“ overrides default
# expect_regex: optional regex that must appear in stdout/stderr

tests:
  - id: health
    description: Verify the /health endpoint of Docker Claude instance.
    cmd: |
      curl -sf ${BASE_URL:-http://localhost:8002}/health
    expect_exit: 0

  - id: simple_category
    description: Run tasks in the "simple" category via unified_stress_test_executor and confirm success output.
    env:
      CATEGORY: simple
    cmd: |
      python unified_stress_test_executor.py --categories simple
    expect_regex: "Success Rate:"

  - id: parallel_high
    description: High-concurrency run of the "parallel" category.
    env:
      CATEGORY: parallel
      MAX_CONCURRENT: "10"
    timeout: 120
    cmd: |
      python unified_stress_test_executor.py --categories parallel --max-concurrent 10
    expect_exit: 0
